# HuPoE

| **제목**   |중/소 산업현장 안전시스템 프로젝트 |
| :---: | :---: | 
| **부제**   |Human Pose Estimation Project with Django|
| **개발자**   |`변의혁`, `구태완`|
| **개발기간**   |`2021.09` ~ `2021.11 `| 
| **포트폴리오 링크** | [포트폴리오 보기](https://www.miricanvas.com/v/1ojqh0) |
| **사용기술** | `Python`,`Tensorflow`,`Keras`,`Mediapipe`,`Dlib`,`Django`,`JavaScript` |
| **버전** | v0.0 |

## 목차
1. [개요](#개요)
2. [내용](#내용)
3. [구성](#구성)
4. [결과](#결과)



## 개요
### 기획의도
 - 제품을 생산하는 공장 혹은 건설현장에서는 크고 작은 안전사고가 발생하고 있다. 특히 안전관리 사각지대로 꼽히고 있는 중ㆍ소형 건설현장 및 중소기업 산업현장 같은 경우 작업인원이 많지 않기 때문에 혼자 작업을 하는 일이 발생하고 그 경우 사고 발생 시 사후 조치가 힘들어 인명피해로 이어지기도 한다. 이를 방지하고 효율적인 대처를 위해 기획하였다. 영상 기반 행동 패턴 분석을 활용한 안전 시스템은 인공지능과 사물인터넷 등 4차 산업기술 사용으로 대규모의 비용이나 인력 투입 없이 사고 및 위험요소를 사전에 감지하거나 사고가 발생한 인원 발생 시 신속한 초동대처로 위험요소를 선제적으로 예방하는 데 목적이 있습니다.

### 개발일정
![20211205_014826](https://user-images.githubusercontent.com/84761763/144717566-e9187c72-b6f1-480a-933a-8295591ee489.png)

### 데이터 셋
 - [학습된 데이터 셋](https://drive.google.com/file/d/1KpPSksGo1gGXI0DcZcehlY5klXmkchPK/view?usp=sharing) 다운 받아 파일 내에 압축 풀어서 사용
 - 학습결과

![20211205_182457](https://user-images.githubusercontent.com/84761763/144740993-b4b5e421-9381-4027-a6aa-afdef566c84f.png)


## 내용
### 주요 기능
 - meidapipe 이용 사람의 관절 추정
 - Dlib이용 사람얼굴 구분하여 신원특정
 - PyQt5, Pyside2 이용 로컬에서 이용가능한 프로그램 제작

### 기능 플로우
 - 데이터베이스에 사용자를 질의하여 있는지 확인하는 1차 로그인 인증을 거칩니다.
 - mediapipe로 사람의 관절을 추출하고 그 관절의 길이와 각도를 이용하여 학습되어있는 걷기,앉기,쓰러지기를 구분하여 정상행동과 비정상행동을 구분 탐지합니다.
 - 그 후, 비정상 행동의 경우 30초, 60초 단위로 지속될 경우 화면에 경고메세지 발생과 알람발생 그리고 지정된 관리자에게로 카카오톡 메세지가 전송됩니다.

## 구성
### 화면구성
#### 메인화면
![웹 메인화면](https://user-images.githubusercontent.com/84761763/144743429-8a7354fe-3ad0-4021-8227-3f96742e456e.png)
![웹 로그인](https://user-images.githubusercontent.com/84761763/144743434-bd06c117-e044-4185-96d8-b125b2d074c2.png)
 - 초기 설정 ID / PW
    - admin / 1234

 - 데이터베이스에서 사용자를 질의하여 있는지 확인하는 1차인증
#### 카메라 화면

 - 모델이 적용되지않은 순수 화면으로 CCTV를 볼 수 있습니다.
#### 모델적용 화면
![웹 모델 적용](https://user-images.githubusercontent.com/84761763/144743438-16d552e0-740b-455f-a63d-fdfe9c91d514.png)

 - 얼굴인식(Dlib), 포즈추정(mediapipe) 적용
 - 자세를 추정하여 정상자세(앉기, 걷기) 비정상자세(쓰러진 자세) 구분
 - 비정상 자세 30초, 60초 단위로 경고메세지, 알람 발생 및 관리자에게 카카오톡 전송 
## 결과
 - [시뮬레이션 동영상 링크(PC)](https://youtu.be/WNNZaweuhTI)
 - [시뮬레이션 동영상 링크(MOBILE)](https://www.youtube.com/watch?v=syuUuSZ4HRs) 
 - 개발 스택

![장고스택](https://user-images.githubusercontent.com/84761763/144742934-7b1ba0e6-130f-4930-b23e-36c5fd8bed16.png)


